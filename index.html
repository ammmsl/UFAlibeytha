<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UFA | 2026 Strategy & Analytics</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #f8fafc; 
            -webkit-tap-highlight-color: transparent;
            color: #0f172a;
            /* Prevent horizontal scrolling on the entire page */
            overflow-x: hidden;
            width: 100%;
        }

        /* Ensure all containers and cards can shrink smaller than their content 
           This is the primary fix for the CSS Grid / Chart.js overflow bug */
        .container, .card, .charts-grid, .chart-wrapper {
            min-width: 0;
        }

        canvas {
            max-width: 100% !important;
        }

        .card { 
            background-color: white;
            border-radius: 2rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            border: 1px solid #e2e8f0;
            padding: 2rem;
        }

        .chart-wrapper { position: relative; height: 320px; width: 100%; }

        .gradient-header { 
            background: linear-gradient(135deg, #0f172a 0%, #1e40af 100%);
            color: white;
            padding: 4rem 1.5rem;
            text-align: center;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            margin-bottom: 2.5rem;
        }
        
        input[type="range"] { 
            width: 100%;
            height: 0.75rem;
            background-color: #e2e8f0;
            border-radius: 0.5rem;
            appearance: none;
            cursor: pointer;
            accent-color: #2563eb;
            display: block;
        }
        
        .container { max-width: 72rem; margin: 0 auto; padding: 0 1rem; width: 100%; }
        .space-y-8 > * + * { margin-top: 2rem; }
        .grid { display: grid; gap: 1rem; }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .uppercase { text-transform: uppercase; }
        .font-black { font-weight: 900; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }
        .italic { font-style: italic; }
        .leading-relaxed { line-height: 1.625; }
        .leading-none { line-height: 1; }
        .tracking-tight { letter-spacing: -0.025em; }
        .tracking-widest { letter-spacing: 0.1em; }
        .tracking-tighter { letter-spacing: -0.05em; }
        .flex { display: flex; }
        .flex-wrap { flex-wrap: wrap; }
        .items-center { align-items: center; }
        .items-baseline { align-items: baseline; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-6 { gap: 1.5rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mb-10 { margin-bottom: 2.5rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .pb-24 { padding-bottom: 6rem; }
        
        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .card { 
                padding: 1.25rem;
                border-radius: 1.25rem;
            }
            .chart-wrapper { height: 260px; }
            #statusIndicator { 
                border-radius: 1.25rem;
                padding: 0.25rem;
                margin-bottom: 1rem;
            }
            #statusIndicator > div { 
                border-radius: 1.1rem;
                padding: 1.25rem;
            }
            .gradient-header {
                padding: 3rem 1rem;
            }
            .status-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            .status-text {
                margin-bottom: 0.5rem;
            }
            .expense-cards {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
                gap: 0.75rem;
            }
            .expense-card {
                padding: 0.75rem !important;
            }
            .grid-lg-5 {
                grid-template-columns: 1fr;
            }
            .charts-grid {
                grid-template-columns: 1fr !important;
            }
        }
        
        @media (min-width: 640px) {
            .sm-grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        
        @media (min-width: 1024px) {
            .lg-grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .lg-col-span-2 { grid-column: span 2 / span 2; }
            .lg-col-span-3 { grid-column: span 3 / span 3; }
            .grid-lg-5 { grid-template-columns: 2fr 3fr; gap: 3rem; }
            .status-grid { grid-template-columns: 2fr 3fr; gap: 3rem; }
            .expense-cards { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .charts-grid { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
        }
        
        @media (min-width: 768px) {
            .md-flex-row { flex-direction: row; }
            .md-items-center { align-items: center; }
            .card { padding: 2.5rem; border-radius: 2rem; }
            #statusIndicator { 
                border-radius: 3rem;
                padding: 0.5rem;
            }
            #statusIndicator > div { 
                border-radius: 2.8rem;
                padding: 3rem;
            }
        }
    </style>
</head>
<body class="pb-24">

    <header class="gradient-header">
        <h1 style="font-size: clamp(1.875rem, 5vw, 3rem); font-weight: 900; margin-bottom: 0.75rem; letter-spacing: -0.025em;">UFA Libeytha?</h1>
        <p style="font-size: clamp(0.875rem, 2vw, 1rem); color: #bfdbfe; opacity: 0.9; max-width: 42rem; margin: 0 auto; font-weight: 500;">Does it make sense to become a member of Ultimate Frisbee Association in 2026? See how much it costs.</p>
    </header>

    <main class="container space-y-8">
        
        <section class="card">
            <h2 style="font-size: 0.75rem; font-weight: 700; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.3em; margin-bottom: 2rem; text-align: center;">Projected Annual Attendance</h2>
            <div style="width: 100%; background-color: #f8fafc; padding: 1rem; border-radius: 1.5rem; border: 1px solid #f1f5f9;">
                <input type="range" id="sessionRange" min="1" max="83" value="20" step="1" style="margin-bottom: 1rem;">
                
                <div class="grid grid-cols-3 items-center gap-2">
                    <div style="font-size: 0.6875rem; color: #94a3b8; font-weight: 900; text-transform: uppercase; letter-spacing: 0.1em;">1 Session</div>
                    
                    <div class="text-center">
                        <span style="font-size: clamp(1.875rem, 5vw, 2.25rem); font-weight: 900; color: #2563eb; display: block; line-height: 1;" id="sessionDisplay">20</span>
                        <div class="mt-1 mb-1">
                            <span style="font-size: 0.625rem; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: -0.05em;" id="frequencyDisplay">~2x/week</span>
                        </div>
                        <span style="font-size: 0.625rem; font-weight: 900; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.1em;">Total Sessions</span>
                    </div>

                    <div style="text-align: right; font-size: 0.6875rem; color: #94a3b8; font-weight: 900; text-transform: uppercase; letter-spacing: 0.1em;">83 Max</div>
                </div>
            </div>
        </section>

        <div id="statusIndicator" style="border-radius: 1.5rem; padding: 0.25rem; transition: all 0.7s; background-color: #e2e8f0; box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);">
            <div style="background-color: white; border-radius: 1.25rem; padding: 1rem;">
                <div class="status-grid" style="display: grid; align-items: center;">
                    <div class="status-text">
                        <h3 id="statusTitle" style="font-size: clamp(1.25rem, 4vw, 1.875rem); font-weight: 900; margin-bottom: 0.5rem;">Analysing...</h3>
                        <p id="statusMsg" style="font-size: clamp(0.75rem, 2vw, 0.875rem); color: #64748b; line-height: 1.625; font-weight: 500;"></p>
                    </div>
                    
                    <div class="expense-cards" style="display: grid; gap: 0.75rem; width: 100%;">
                        <div class="expense-card" style="padding: 1rem; border-radius: 1rem; background-color: #f8fafc; border: 1px solid #e2e8f0;">
                            <p style="font-size: 0.625rem; font-weight: 900; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.2em; margin-bottom: 0.5rem;">Guest Total</p>
                            <p id="guestValue" style="font-size: clamp(1.5rem, 4vw, 2.25rem); font-weight: 900; color: #1e293b;">MVR 0</p>
                            <p style="font-size: 0.625rem; color: #94a3b8; margin-top: 0.5rem; font-weight: 600; font-style: italic;">MVR 25 surcharge</p>
                        </div>
                        <div class="expense-card" style="padding: 1rem; border-radius: 1rem; background-color: #eff6ff; border: 1px solid #dbeafe;">
                            <p style="font-size: 0.625rem; font-weight: 900; color: #93c5fd; text-transform: uppercase; letter-spacing: 0.2em; margin-bottom: 0.5rem;">Member Total</p>
                            <p id="memberValue" style="font-size: clamp(1.5rem, 4vw, 2.25rem); font-weight: 900; color: #1d4ed8;">MVR 0</p>
                            <p style="font-size: 0.625rem; color: #3b82f6; margin-top: 0.5rem; font-weight: 700; text-transform: uppercase;">+MVR 250 Fee</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <section class="card">
            <div style="display: flex; flex-direction: column; justify-content: space-between; align-items: flex-start; gap: 1.5rem; margin-bottom: 2.5rem;">
                <div>
                    <h3 style="font-weight: 900; font-size: clamp(1.125rem, 3vw, 1.5rem); color: #1e293b;">Per Session Cost Efficiency</h3>
                    <p style="font-size: clamp(0.75rem, 2vw, 0.875rem); color: #94a3b8; font-weight: 500; font-style: italic;">Comparison based on the Number of Players attending.</p>
                </div>
                <div class="flex flex-wrap gap-3">
                    <div style="background-color: #fef2f2; border: 1px solid #fecaca; padding: 0.75rem; border-radius: 1rem;">
                        <span style="display: block; font-size: 0.625rem; font-weight: 900; color: #f87171; text-transform: uppercase; margin-bottom: 0.25rem;">Highest (14 pax)</span>
                        <div class="flex items-baseline gap-2">
                            <div>
                                <span style="font-size: 1rem; font-weight: 900; color: #dc2626;">MVR 60</span>
                                <span style="font-size: 0.5625rem; font-weight: 700; color: #f87171;">/Mem</span>
                            </div>
                            <div style="width: 1px; height: 1rem; background-color: #fecaca;"></div>
                            <div>
                                <span style="font-size: 1rem; font-weight: 900; color: #dc2626;">MVR 75</span>
                                <span style="font-size: 0.5625rem; font-weight: 700; color: #f87171;">/Guest</span>
                            </div>
                        </div>
                    </div>
                    <div style="background-color: #ecfdf5; border: 1px solid #a7f3d0; padding: 0.75rem; border-radius: 1rem;">
                        <span style="display: block; font-size: 0.625rem; font-weight: 900; color: #34d399; text-transform: uppercase; margin-bottom: 0.25rem;">Average (20 pax)</span>
                        <div class="flex items-baseline gap-2">
                            <div>
                                <span style="font-size: 1rem; font-weight: 900; color: #059669;">MVR 45</span>
                                <span style="font-size: 0.5625rem; font-weight: 700; color: #34d399;">/Mem</span>
                            </div>
                            <div style="width: 1px; height: 1rem; background-color: #a7f3d0;"></div>
                            <div>
                                <span style="font-size: 1rem; font-weight: 900; color: #059669;">MVR 60</span>
                                <span style="font-size: 0.5625rem; font-weight: 700; color: #34d399;">/Guest</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="chart-wrapper">
                <canvas id="perPlayerChart"></canvas>
            </div>
        </section>

        <div class="charts-grid" style="display: grid; gap: 2rem;">
            <section class="card">
                <h3 style="font-weight: 900; font-size: clamp(1rem, 3vw, 1.25rem); color: #1e293b; margin-bottom: 1.5rem;">Annual Accumulation</h3>
                <div class="chart-wrapper">
                    <canvas id="growthChart"></canvas>
                </div>
            </section>

            <section class="card">
                <h3 style="font-weight: 900; font-size: clamp(1rem, 3vw, 1.25rem); color: #1e293b; margin-bottom: 0.5rem;">Attendance Distribution</h3>
                <p style="font-size: 0.625rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 1.5rem; font-weight: 700;">2-Player Bins (Historical Data)</p>
                <div class="chart-wrapper">
                    <canvas id="distChart"></canvas>
                </div>
            </section>
        </div>

    </main>

    <script>
        const COST_FIELD = 700;
        const FEE_ANNUAL = 250;
        const SURCHARGE_MEMBER = 10;
        const SURCHARGE_GUEST = 25;
        const AVG_PLAYERS = 20;

        const bins = ["12-13", "14-15", "16-17", "18-19", "20-21", "22-23", "24-25", "26-27", "28-29", "30-31", "32-33", "34-35"];
        const frequencies = [9, 8, 14, 9, 6, 12, 8, 3, 6, 3, 1, 1];

        Chart.defaults.interaction.mode = 'index';
        Chart.defaults.interaction.intersect = false;

        let perPlayerChart, growthChart, distChart;

        function refreshUI(sessions) {
            const baseCost = COST_FIELD / AVG_PLAYERS;
            const totalGuest = Math.round((baseCost + SURCHARGE_GUEST) * sessions);
            const totalMember = Math.round(((baseCost + SURCHARGE_MEMBER) * sessions) + FEE_ANNUAL);
            const delta = totalGuest - totalMember;

            document.getElementById('sessionDisplay').innerText = sessions;
            
            const perWeek = sessions / 52;
            let frequencyText;
            
            if (perWeek < 0.5) {
                const perMonth = Math.round(sessions / 12);
                frequencyText = perMonth === 0 ? "~1x every few months" : `~${perMonth}x/month`;
            } else if (perWeek < 1) {
                frequencyText = "~1x every 2 weeks";
            } else if (perWeek < 1.5) {
                frequencyText = "~1x/week";
            } else if (perWeek < 2.5) {
                frequencyText = "~2x/week";
            } else if (perWeek < 3.5) {
                frequencyText = "~3x/week";
            } else {
                const rounded = Math.round(perWeek);
                frequencyText = `~${rounded}x/week`;
            }
            
            document.getElementById('frequencyDisplay').innerText = frequencyText;
            document.getElementById('guestValue').innerText = `MVR ${totalGuest.toLocaleString()}`;
            document.getElementById('memberValue').innerText = `MVR ${totalMember.toLocaleString()}`;

            const container = document.getElementById('statusIndicator');
            const title = document.getElementById('statusTitle');
            const msg = document.getElementById('statusMsg');

            if (delta > 0) {
                container.style.backgroundColor = '#10b981';
                container.style.boxShadow = '0 25px 50px -12px rgba(16, 185, 129, 0.25)';
                title.innerText = "Membership Wins! ðŸŽ‰";
                title.style.color = '#059669';
                msg.innerText = `You save MVR ${delta.toLocaleString()} per year vs guest rates. At ${sessions} sessions, membership pays off.`;
            } else {
                container.style.backgroundColor = '#2563eb';
                container.style.boxShadow = '0 25px 50px -12px rgba(37, 99, 235, 0.25)';
                title.innerText = "Guest is Better ðŸ‘Ÿ";
                title.style.color = '#2563eb';
                msg.innerText = `You're MVR ${Math.abs(delta)} from break-even. Membership is cheaper after 16+ sessions.`;
            }

            updateGrowthPlot(sessions);
        }

        function initCharts() {
            const pRange = Array.from({length: 27}, (_, i) => i + 14);
            perPlayerChart = new Chart(document.getElementById('perPlayerChart'), {
                type: 'line',
                data: {
                    labels: pRange,
                    datasets: [
                        { label: 'Member Cost', borderColor: '#10b981', backgroundColor: '#10b981', data: pRange.map(p => Math.round((COST_FIELD/p) + SURCHARGE_MEMBER)), tension: 0.4, pointRadius: 0, borderWidth: 5 },
                        { label: 'Guest Cost', borderColor: '#3b82f6', backgroundColor: '#3b82f6', data: pRange.map(p => Math.round((COST_FIELD/p) + SURCHARGE_GUEST)), tension: 0.4, pointRadius: 0, borderWidth: 5 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { 
                        y: { title: { display: true, text: 'MVR / Session' } },
                        x: { title: { display: true, text: 'Players attending' } }
                    },
                    plugins: { legend: { position: 'bottom' } }
                }
            });

            const sRange = Array.from({length: 43}, (_, i) => i * 2);
            growthChart = new Chart(document.getElementById('growthChart'), {
                type: 'line',
                data: {
                    labels: sRange,
                    datasets: [
                        { label: 'Member Total', borderColor: '#10b981', data: [], tension: 0.2, pointRadius: 0, borderWidth: 3 },
                        { label: 'Guest Total', borderColor: '#3b82f6', data: [], tension: 0.2, pointRadius: 0, borderWidth: 3 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });

            distChart = new Chart(document.getElementById('distChart'), {
                type: 'bar',
                data: {
                    labels: bins,
                    datasets: [{ label: 'Sessions', data: frequencies, backgroundColor: '#6366f1', borderRadius: 12 }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        function updateGrowthPlot(currentS) {
            const labels = Array.from({length: 43}, (_, i) => i * 2);
            const base = COST_FIELD / AVG_PLAYERS;
            growthChart.data.datasets[0].data = labels.map(s => (s * (base + SURCHARGE_MEMBER)) + FEE_ANNUAL);
            growthChart.data.datasets[1].data = labels.map(s => s * (base + SURCHARGE_GUEST));
            growthChart.update('none');
        }

        const slider = document.getElementById('sessionRange');
        slider.addEventListener('input', (e) => refreshUI(parseInt(e.target.value)));

        initCharts();
        refreshUI(20);
    </script>
</body>
</html>
